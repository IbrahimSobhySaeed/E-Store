<div class="cart-page">
    <div class="container">
        <h1 class="page-title">Shopping Cart</h1>

        <!-- Empty Cart -->
        <div class="empty-cart" *ngIf="cartItems().length === 0">
            <span class="material-icons">shopping_cart</span>
            <h2>Your cart is empty</h2>
            <p>Looks like you haven't added any items to your cart yet.</p>
            <a routerLink="/products" class="btn btn-primary">
                <span class="material-icons">shopping_bag</span>
                Continue Shopping
            </a>
        </div>

        <!-- Cart Items -->
        <div class="cart-content" *ngIf="cartItems().length > 0">
            <div class="cart-items">
                <div class="cart-header">
                    <h2>Cart Items ({{ cartItemsCount() }})</h2>
                    <button class="btn btn-secondary" (click)="clearCart()">
                        <span class="material-icons">delete_outline</span>
                        Clear Cart
                    </button>
                </div>

                <div class="cart-item" *ngFor="let item of cartItems()">
                    <div class="item-image">
                        <img [src]="item.product.image" [alt]="item.product.title">
                    </div>

                    <div class="item-details">
                        <a [routerLink]="['/products', item.product.id]" class="item-title">
                            {{ item.product.title }}
                        </a>
                        <p class="item-category">{{ item.product.category }}</p>
                        <p class="item-price">{{ item.product.price | currency }}</p>
                    </div>

                    <div class="item-quantity">
                        <label>Quantity:</label>
                        <div class="quantity-controls">
                            <button class="qty-btn" (click)="updateQuantity(item.product.id, item.quantity - 1)"
                                [disabled]="item.quantity <= 1">
                                <span class="material-icons">remove</span>
                            </button>
                            <input type="number" [value]="item.quantity" readonly class="qty-input">
                            <button class="qty-btn" (click)="updateQuantity(item.product.id, item.quantity + 1)">
                                <span class="material-icons">add</span>
                            </button>
                        </div>
                    </div>

                    <div class="item-total">
                        <p class="total-label">Total:</p>
                        <p class="total-price">{{ getItemTotal(item) | currency }}</p>
                    </div>

                    <button class="remove-btn" (click)="removeItem(item.product.id)">
                        <span class="material-icons">close</span>
                    </button>
                </div>
            </div>

            <!-- Cart Summary -->
            <div class="cart-summary">
                <h3>Order Summary</h3>

                <div class="summary-row">
                    <span>Subtotal ({{ cartItemsCount() }} items)</span>
                    <span>{{ cartTotal() | currency }}</span>
                </div>

                <div class="summary-row">
                    <span>Shipping</span>
                    <span class="free-shipping">Free</span>
                </div>

                <div class="summary-row">
                    <span>Tax</span>
                    <span>{{ cartTotal() * 0.08 | currency }}</span>
                </div>

                <div class="summary-total">
                    <span>Total</span>
                    <span>{{ cartTotal() * 1.08 | currency }}</span>
                </div>

                <button class="btn btn-primary checkout-btn" (click)="checkout()">
                    <span class="material-icons">payment</span>
                    Proceed to Checkout
                </button>

                <a routerLink="/products" class="continue-shopping">
                    <span class="material-icons">arrow_back</span>
                    Continue Shopping
                </a>

                <div class="payment-methods">
                    <p>We accept:</p>
                    <div class="payment-icons">
                        <span class="material-icons">credit_card</span>
                        <span class="material-icons">account_balance</span>
                        <span class="material-icons">payment</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>